{% extends 'base.html.twig' %}

{% block title %}All Promotions{% endblock %}

{% block body %}


	{# Flash #}
	{% for label, messages in app.flashes %}
		{% for message in messages %}
			<div class="alert alert-{{ label }}">
				{{ message }}
			</div>
		{% endfor %}
	{% endfor %}


    {% if app.request.attributes.get('_route') == 'promotion_json' %}
            <div id="json-data" data-json="{{ myData | json_encode }}"></div>
    {% else %}
        {% for promotion in promotions %}

            <div class="card swiper-slide" id="card_product" data-id="{{ promotion.id }}">
                            <div class="card-body">
                                <div class="d-flex justify-content-around">
                                    {% if app.user is not null %}
                                        {% if 'ROLE_ADMIN' in app.user.roles %}
                                            <a href="{{ path('deletePromotion', {'id': promotion.id }) }}"><i class="fa fa-minus-square-o minusAdmin" data-id="{{ promotion.id }}" aria-hidden="true" data-tooltip="Supprimer une promotion"></i></a>
                                            <a href="{{ path('editPromotion', { 'id': promotion.id }) }}"><i class="fa fa-pencil editAdmin" data-id="{{ promotion.id }}" aria-hidden="true" data-tooltip="Modifier une promotion"></i></a>
                                        {% endif %}
                                    {% endif %} 

                                    {% if app.user is null %}
                                        <i class="fa fa-heart-o card_heart" aria-hidden="true" data-target="#cartModal" data-toggle="modal" data-id="{{ promotion.id }}" data-tooltip="Ajouter au Panier"></i>
                                    {% endif %}
                                </div>
                                <div class="d-flex flex-column justify-content-around">
                                    <h5 id="homeProductName" class="card-title">Nom : {{ promotion.name }}</h5>
                                    <h5 class="card-text" id="homeProductPrice">Description : {{ promotion.description }} </h5>
                                    <h5 id="homeProductName" class="card-title">Date de départ de la promition : {{ promotion.startDate|date('Y-m-d') }}</h5>
                                    <h5 id="homeProductName" class="card-title">Date de fin de la promition : {{ promotion.endDate|date('Y-m-d') }}</h5>
                                    <h5 id="homeProductName" class="card-title">Pourcentage de réduction : {{ promotion.discountPercentage }}%</h5>
                                </div>
                            </div>
                        </div>
        {% endfor %}
                </div>
            </div>
    {% endif %}

	<a href="{{ path('addPromotion') }}">
		<div class="d-flex justify-content-center border border-secondary rounded" id="addButton">
			<i class="fa fa-plus" aria-hidden="true" id="plusAdmin"></i>
			<h2 class="addProduct">Ajouter une promotion</h2>
		</div>
	</a>
{% endblock %}